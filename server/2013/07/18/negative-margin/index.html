
<!DOCTYPE html>
<html>
  
  <head>
    <title>神奇的负边距</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta content="text/html; charset=UTF-8" http-equiv=Content-Type />
    <meta name=author content="Zhiying.Mai" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" type="text/css" href="/assets/themes/dafeizizhu/bootstrap/css/bootstrap.min.css" />
	<link rel=stylesheet type=text/css href="/assets/themes/dafeizizhu/css/style.css" media=screen />
	<link rel=stylesheet type=text/css href="/assets/themes/dafeizizhu/css/style-responsive.css" media="screen and (max-width: 900px)"/>

	<!--[if lte IE 7]>
	<link rel="stylesheet" type="text/css" href="/assets/themes/dafeizizhu/css/style-iefixed.css" />
    <![endif]-->
  </head>
  
  <body>
    <DIV id=home class=pages>
      <DIV id=main_container>
        <DIV id="left">
          <DIV class=left_content>
            <H1>
              <A title="dafeizizhu" href="/">
                dafeizizhu
              </A>
            </H1>
            <DIV class=clear>
            </DIV>
            <DIV class=navigation>
              <UL id=slide>
                 
                


  <li class="page_item page-item-52 "><a href="/index.html">首页</a></li>
  
    
      
    
  
    
      
      	
      	<li class="page_item page-item-52"><a href="/archive.html">博文</a></li>
      	
      
    
  
    
      
      	
      	<li class="page_item page-item-52"><a href="/tags.html">标签</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  




              </UL>
            </DIV>
			<DIV>
			  <ul class="socials">
                <li class="social-weixin"><a href="http://weixin.qq.com" title="扫一扫每天获取更新内容哦亲！"></a></li>
			  </ul>
            </DIV>
          </DIV>
        </DIV>
        <DIV id="center">
          <DIV class=right_content>
            <!--<DIV id=post-52 class=postsingle>-->
            <DIV class=entry>
              
<div class="page-header">
  <h1>神奇的负边距</h1>
</div>

<div class="row-fluid">
  <div class="span8">
    <p>之前写过一篇<a href='http://dafeizizhu.github.io/2013/07/08/three-column-layout-middle-first/'>《经典三列布局之如何让中间的列先显示出来》</a>，里面讲的就是使用浮动、相对定位和负边距来做的一套布局。写那篇文章的时候还没太搞懂负边距是怎么回事，今天简单分析一下对不同元素（正常、浮动、绝对定位等）的负边距是如何起作用的。</p>

<p>首先明确几点：</p>

<ol>
<li>负边距是完全合法的CSS写法，W3允许边距的值是负值。</li>

<li>负边距不属于CSS hack。</li>

<li>a负边距不会使元素脱离文档流。</li>

<li>所有现代浏览器都支持负边距（IE6也部分支持，太棒了！）。</li>
</ol>

<p>简单看看负边距的工作原理：</p>

<ol>
<li>在<code>top</code>和<code>left</code>方向上应用负边距，该元素会向指定的方向移动，随后的元素也会跟着一起移动。</li>

<li>在<code>bottom</code>和<code>right</code>方向上应用负边距，该元素的位置不会发生任何移动，但是随后的元素会挤压过来，看上去的效果就是该元素占的空间变小了。</li>

<li>当该元素没有应用宽度（<code>width: auto</code>也算），为该元素设置<code>left</code>和<code>right</code>方向上的负边距会让元素的宽度边大。</li>
</ol>

<p>负边距有什么用呢？其中最重要的一个作用我认为是把DOM树中较后出现的元素显示在页面较前的位置。我们知道HTML解析DOM树的时候是根据书写的顺序解析的。而文档的解析顺序是从上到下，从左到右（当然方向是<code>ltr</code>）的，那么正常书写的N列布局肯定是第一列写在最前边，但是可能我们需要中间第n列先解析，这时候就要把第n列的内容书写在前边，通过负边距调整位置，达到理想的效果。</p>

<p>现在分析一下之前写过的那篇文章中，左列的CSS究竟是如何达到最后的效果的。现来看看左列的CSS代码。</p>

<pre><code>#left {
    position: relative; // 1
    left: -100px;       // 2
    float: left;        // 3
    margin-left: -100%; // 4   
}</code></pre>

<p>这个元素分别使用了浮动、相对定位和负边距三种方式进行布局。现在按负边距、浮动、相对定位的顺序加上CSS，效果为：</p>

<ol>
<li>加上负边距，该元素向左移动，移动的距离跟父元素的宽度一致。注意，这里的宽度是指<strong>内容宽度</strong>，即不算<code>padding</code>、<code>border</code>和<code>margin</code>的宽度。</li>

<li>加上浮动，该元素与<code>middle</code>两个元素都变成浮动元素，负边距使得该元素沿着浮动方向位移了父元素的宽度，效果是该元素的左边界与<code>middle</code>的左边界重合。</li>

<li>最后加上相对定位，让该元素相对于其现有位置再向左移动与其宽度相等的距离。最后的效果就是该元素移动到<code>middle</code>元素的左侧。</li>
</ol>

<p>利用负边距，还能做出很多有趣的效果，例如一些层叠效果，如标签页、印章等。与其他CSS样式结合起来更是有趣。</p>

<p>今天在工作中也利用了之前写的三列布局的知识。用心沉淀，再返回到实践中，这种感觉真好。</p>
    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/2013/07/17/viewport" title="响应式设计入门之viewport">&larr; 上一篇</a></li>
      
        <li><a href="/archive.html">返回列表</a></li>
      
        <li class="next"><a href="/2013/07/19/css-equal-height-again" title="再谈CSS等高布局">下一篇 &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
  </div>
  
  <div class="span4">
    <h4>发布</h4>
    <div class="date"><span>18 July 2013</span></div>

  
    <h4>标签</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="/tags.html#css-ref">css <span>12</span></a></li>
    
  



    </ul>
    
  </div>
</div>


            </DIV>
            <DIV class=footer>
              <p>
                &copy; Zhiying.Mai 2012 with help from
                <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">
                  Jekyll Bootstrap
                </a>
                and
                <a href="http://twitter.github.com/bootstrap/" target="_blank">
                  Twitter Bootstrap
                </a>
              </p>
            </DIV>
            <!--</DIV>-->
          </DIV>
        </DIV>
      </DIV>
      
  </body>
</html>

