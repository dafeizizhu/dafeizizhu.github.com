
<!DOCTYPE html>
<html>
  
  <head>
    <title>HTTP协议之HTTP方法</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta content="text/html; charset=UTF-8" http-equiv=Content-Type />
    <meta name=author content="Zhiying.Mai" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" type="text/css" href="/assets/themes/dafeizizhu/bootstrap/css/bootstrap.min.css" />
	<link rel=stylesheet type=text/css href="/assets/themes/dafeizizhu/css/style.css" media=screen />
	<link rel=stylesheet type=text/css href="/assets/themes/dafeizizhu/css/style-responsive.css" media="screen and (max-width: 900px)"/>

	<!--[if lte IE 7]>
	<link rel="stylesheet" type="text/css" href="/assets/themes/dafeizizhu/css/style-iefixed.css" />
    <![endif]-->
  </head>
  
  <body>
    <DIV id=home class=pages>
      <DIV id=main_container>
        <DIV id="left">
          <DIV class=left_content>
            <H1>
              <A title="dafeizizhu" href="/">
                dafeizizhu
              </A>
            </H1>
            <DIV class=clear>
            </DIV>
            <DIV class=navigation>
              <UL id=slide>
                 
                


  <li class="page_item page-item-52 "><a href="/index.html">首页</a></li>
  
    
      
    
  
    
      
      	
      	<li class="page_item page-item-52"><a href="/archive.html">博文</a></li>
      	
      
    
  
    
      
      	
      	<li class="page_item page-item-52"><a href="/tags.html">标签</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  




              </UL>
            </DIV>
			<DIV>
			  <ul class="socials">
                <li class="social-weixin"><a href="http://weixin.qq.com" title="扫一扫每天获取更新内容哦亲！"></a></li>
			  </ul>
            </DIV>
          </DIV>
        </DIV>
        <DIV id="center">
          <DIV class=right_content>
            <!--<DIV id=post-52 class=postsingle>-->
            <DIV class=entry>
              
<div class="page-header">
  <h1>HTTP协议之HTTP方法</h1>
</div>

<div class="row-fluid">
  <div class="span8">
    <p>今天看阿雄写代码，封装与服务器交互的相关工具方法。各种<code>get</code>、<code>post</code>、<code>put</code>、<code>del</code>的方法，对应各种HTTP方法。<code>get</code>和<code>post</code>不用说，看到<code>put</code>和<code>delete</code>的时候，阿雄说这两个方法的参数都不是放在请求体里面。奇怪了，按照常理来说对服务有影响的操作都应该把参数放到请求体里面啊（类似<code>post</code>），难道不是这样的？</p>

<p>看W3的规范里面，HTTP协议能使用的方法大概有以下几种：</p>

<ol>
<li><code>OPTIONS</code>，列出当前服务器支持哪些HTTP方法（几乎没有人用这个HTTP方法，不过可以利用这个方法做自文档的Restful服务的查询方法，<a href='http://zacstewart.com/2012/04/14/http-options-method.html'>参考这里</a>）。</li>

<li><code>GET</code>，最常用的HTTP方法之一，从服务器获取URI指定的资源。资源会放到响应体里面返回。<code>GET</code>方法获取数据应该是有缓存机制的，通过<code>If-Modified-Since</code>等HTTP头可以声明当前这个URI对应的信息是否发生变化，如果没有变化则可以使用之前的缓存信息，这样可以减少不必要的网络数据传输。当请求含有<code>Range</code>头的时候，这次<code>GET</code>请求所返回的信息是部分的，当分块下载的时候会用到。<strong>注意，<code>GET</code>请求的参数都是作为查询串放到URL后面，所以当请求参数含有敏感数据的时候千万不要用<code>GET</code>。</strong></li>

<li><code>HEAD</code>，与<code>GET</code>类似，只是返回的响应体的内容是空的，只包含响应头。这个方法常用作校验有效性、校验权限以及查看信息是否被修改。</li>

<li><code>POST</code>，往URI指定的路径新增一个资源。<code>POST</code>的参数是放在请求体里面的，一般这个参数就是声明了一个新的资源，例如文件夹里面的一个新文件、邮件列表里面的一个新邮箱或者数据表中的一条新的记录。与我们日常使用的场景不同，如果服务器没有增加新的资源，或者这个请求体是空的，应该返回状态码200或者204；如果服务器正确增加了一个新的资源，应该返回一个201表示资源已经被创建。而我们日常一般就是用200表示服务器已经正确处理请求而已。一般<code>POST</code>是不会缓存的，除非设置了<code>Cache-Control</code>或者<code>Expires</code>头。</li>

<li><code>PUT</code>，分两种情况。如果URI指定的资源不存在，则当<code>POST</code>处理，往服务器新增一个指定的资源；如果存在，则修改现有的资源，修改成功返回状态码200或者204，修改失败则按照失败的具体原因返回5XX等状态码。</li>

<li><code>DELETE</code>，删除URI指定的资源。</li>

<li><code>TRACE</code>，对可能经过代理服务器传送到服务器上去的报文进行追踪。</li>

<li><code>CONNECT</code>，一个保留的方法，指定代理改变发送请求时使用的协议，例如从HTTP到HTTPS。</li>
</ol>

<p>下面使用<code>jQuery.ajax</code>方法来看看真实场景下HTTP方法是如何运用的。例子<a href='http://jsfiddle.net/4Y8t2/2/show/'>参考这里</a>。</p>

<p>例子非常简单，就是使用不同的HTTP方法往服务器发送HTTP请求。可以看到<code>GET</code>和<code>HEAD</code>的参数是放到查询串（search）上面的。其他方法一律是放到请求体里面。这个例子里面的<code>POST</code>、<code>PUT</code>和<code>DELETE</code>都被服务器拒绝了，返回状态码403（Forbidden）。</p>

<p>有趣的是，同样一段代码，在IE9上面返回的结果跟Chrome上不一样。主要表现在<code>TRACE</code>和<code>CONNECT</code>上。IE9上的<code>TRACE</code>输出“参数无效”，<code>CONNECT</code>是403；而Chrome则都是输出一个“DOM Exception 18”，这个往后可以研究一下<code>jQuery.ajax</code>的具体实现才能看出什么端倪来。</p>
    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/2013/07/24/css-word-break" title="换行还是不换行之word-break">&larr; 上一篇</a></li>
      
        <li><a href="/archive.html">返回列表</a></li>
      
        <li class="next"><a href="/2013/07/26/closure-usage" title="Secrets of the JavaScript Ninja 读书笔记之 闭包（一）">下一篇 &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
  </div>
  
  <div class="span4">
    <h4>发布</h4>
    <div class="date"><span>25 July 2013</span></div>

  
    <h4>标签</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="/tags.html#http-ref">http <span>4</span></a></li>
    
  



    </ul>
    
  </div>
</div>


            </DIV>
            <DIV class=footer>
              <p>
                &copy; Zhiying.Mai 2012 with help from
                <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">
                  Jekyll Bootstrap
                </a>
                and
                <a href="http://twitter.github.com/bootstrap/" target="_blank">
                  Twitter Bootstrap
                </a>
              </p>
            </DIV>
            <!--</DIV>-->
          </DIV>
        </DIV>
      </DIV>
      
  </body>
</html>

