
<!DOCTYPE html>
<html>
  
  <head>
    <title>DOM的setAttribute方法</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta content="text/html; charset=UTF-8" http-equiv=Content-Type />
    <meta name=author content="Zhiying.Mai" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" type="text/css" href="/assets/themes/dafeizizhu/bootstrap/css/bootstrap.min.css" />
	<link rel=stylesheet type=text/css href="/assets/themes/dafeizizhu/css/style.css" media=screen />
	<link rel=stylesheet type=text/css href="/assets/themes/dafeizizhu/css/style-responsive.css" media="screen and (max-width: 900px)"/>

	<!--[if lte IE 7]>
	<link rel="stylesheet" type="text/css" href="/assets/themes/dafeizizhu/css/style-iefixed.css" />
    <![endif]-->
  </head>
  
  <body>
    <DIV id=home class=pages>
      <DIV id=main_container>
        <DIV id="left">
          <DIV class=left_content>
            <H1>
              <A title="dafeizizhu" href="/">
                dafeizizhu
              </A>
            </H1>
            <DIV class=clear>
            </DIV>
            <DIV class=navigation>
              <UL id=slide>
                 
                


  <li class="page_item page-item-52 "><a href="/index.html">首页</a></li>
  
    
      
    
  
    
      
      	
      	<li class="page_item page-item-52"><a href="/archive.html">博文</a></li>
      	
      
    
  
    
      
      	
      	<li class="page_item page-item-52"><a href="/tags.html">标签</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  




              </UL>
            </DIV>
			<DIV>
			  <ul class="socials">
                <li class="social-weixin"><a href="http://weixin.qq.com" title="扫一扫每天获取更新内容哦亲！"></a></li>
			  </ul>
            </DIV>
          </DIV>
        </DIV>
        <DIV id="center">
          <DIV class=right_content>
            <!--<DIV id=post-52 class=postsingle>-->
            <DIV class=entry>
              
<div class="page-header">
  <h1>DOM的setAttribute方法</h1>
</div>

<div class="row-fluid">
  <div class="span8">
    <p>昨天讨论了<code>getAttribute</code>，今天继续讨论<code>setAttribute</code>的使用方法。</p>

<h3 id='id35'>标准</h3>

<blockquote>
<p>Adds a new attribute or changes the value of an existing attribute on the specified element.</p>
</blockquote>

<p><code>setAttribute</code>这个方法就是用来增加或者修改一个DOM元素上的特性（Attribute）。当指定名称的特性不存在，则会新增一个该名称的特性；如果该特性已经存在，则会修改现有特性的值。这个方法接受两个参数：</p>

<p>1. 表示特性名称的字符串。 2. 这个特性的新的值。当传入的参数不是字符串的时候会隐式调用参数的<code>toString</code>方法。例子<a href='http://jsfiddle.net/7Tenq/'>参考这里</a>。IE7貌似有不一样的行为，下面会提到。</p>

<p>使用的例子如下:</p>

<pre><code>var d = document.getElementById(&quot;d1&quot;); 
d.setAttribute(&quot;align&quot;, &quot;center&quot;);</code></pre>

<p>与<code>getAttribute</code>类似，在HTML DOM里面<code>setAttribute</code>也是大小写不敏感的。当需要删除一个特性的时候不应该使用<code>setAttribute(&quot;someAttr&quot;, null)</code>，而是应该使用<code>removeAttribute</code>。</p>

<h3 id='ie'>又是IE</h3>

<p>与<code>getAttribute</code>类似，IE7以及更早的版本有一套自己的实现。在比较早的IE的版本又可以传入第三个参数：<code>lflag</code>，这个标志位接受以下两个值：</p>

<ol>
<li><code>0</code>，默认值，对特性的名称大小写不敏感。</li>

<li><code>1</code>，对特性的名称是大小写敏感的。</li>
</ol>

<p>同样，在IE8之前的版本特性（Attribute）与属性（Property）的名称必须一致（例如<code>className</code>等）、在IE8以及更高版本的IE上第三个参数已经不支持了，不要使用。这个方法甚至可以绑定事件处理程序，如：</p>

<pre><code>document.getElementById(&quot;test&quot;).setAttribute(&#39;onclick&#39;, &#39;alert(1)&#39;);</code></pre>

<p>经测试，IE7不支持，例子<a href='http://jsfiddle.net/M3PLw/2/'>参考这里</a>。</p>

<p>有一个比较有趣的现象，就是第二个参数<code>val</code>的取值类型。标准里面应该是传入字符串的，会隐式调用这个参数的<code>toString</code>方法。但是，在IE7，通过<code>getAttribute</code>返回的特性值与标准实现是不一样的，如以下代码：</p>

<pre><code>function test(attr, val) {
  var el = document.getElementById(&quot;test&quot;);
  el.setAttribute(attr, val);
  alert(&quot;Set Attr: &quot; + attr + 
    &quot; value: &quot; + el.getAttribute(attr) + 
    &quot; valute type: &quot; + typeof el.getAttribute(attr));
}

test(&quot;a&quot;, null); // null
test(&quot;b&quot;, undefined); // undefeined
test(&quot;c&quot;, {}); // object
test(&quot;d&quot;, [1, 2, 3]); // Array
test(&quot;e&quot;, /test/); // RegExp
test(&quot;f&quot;, 0); // Number
test(&quot;g&quot;, true); // Boolean</code></pre>

<p>在IE7上面，通过<code>getAttribute</code>返回的值的类型竟然跟<code>setAttribute</code>的第二个参数的类型一样的！而在高版本的IE或者Chrome等现代浏览器里面<code>getAttribute</code>返回的都是字符串。说明在IE7上，<code>setAttribute</code>并没有把第二个参数转化成字符串，而是把参数直接存在DOM上面了。例子<a href='http://jsfiddle.net/7Tenq/show/'>参考这里</a>。</p>
    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/2013/08/12/dom-getattribute" title="DOM的getAttribute方法">&larr; 上一篇</a></li>
      
        <li><a href="/archive.html">返回列表</a></li>
      
        <li class="next"><a href="/2013/08/14/dom-removeattribute" title="DOM 的removeAttribute方法">下一篇 &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
  </div>
  
  <div class="span4">
    <h4>发布</h4>
    <div class="date"><span>13 August 2013</span></div>

  
    <h4>标签</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="/tags.html#JavaScript-ref">JavaScript <span>26</span></a></li>
    
  



    </ul>
    
  </div>
</div>


            </DIV>
            <DIV class=footer>
              <p>
                &copy; Zhiying.Mai 2012 with help from
                <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">
                  Jekyll Bootstrap
                </a>
                and
                <a href="http://twitter.github.com/bootstrap/" target="_blank">
                  Twitter Bootstrap
                </a>
              </p>
            </DIV>
            <!--</DIV>-->
          </DIV>
        </DIV>
      </DIV>
      
  </body>
</html>

