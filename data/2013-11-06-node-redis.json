{"year":"2013","month":"11","day":"06","filePath":"/home/dafeizizhu/workspace/github/dafeizizhu/dafeizizhu.github.com/site/posts/2013/11/06/node-redis.html","fileName":"node-redis","layout":"post","title":"在Node上使用Redis","description":"","tags":["node"],"markdownText":"\n\n\nRedis是一个开源的，基于`key-value`的内存数据库，可以作为一个能够存储字符串、哈希表、列表、集合等数据结构的数据服务器。\n\n首先是要安装一个Redis。在Unix/Linux下需要下载源码编译安装，今天就来简单看看Windows下如何安装吧。打开Redis的Windows版本的[下载页面](https://github.com/rgl/redis/downloads)，选择对应Windows版本的包下载即可。\n\n下载完解压到一个地方就可以使用了。首先启动Redis服务，双击`redis-server.exe`即可：\n\n    [9612] 07 Nov 18:01:28 # Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\n    [9612] 07 Nov 18:01:28 * Server started, Redis version 2.4.5\n    [9612] 07 Nov 18:01:28 * DB loaded from disk: 0 seconds\n    [9612] 07 Nov 18:01:28 * The server is now ready to accept connections on port 6379\n    [9612] 07 Nov 18:01:29 - DB 0: 8 keys (0 volatile) in 12 slots HT.\n    [9612] 07 Nov 18:01:29 - 0 clients connected (0 slaves), 1182568 bytes in use\n\n启动后可以看到当前的端口、使用了多少个`key`还有多少个客户端链接进来等信息。注意哦，这些信息现在都是默认的配置，修改配置文件`redis.conf`可以修改这些信息，详细的配置文档[参考这里](http://redis.io/topics/config)。然后就可以启动`redis-cli.exe`来使用Redis了：\n\n    redis 127.0.0.1:6379> set foo bar\n    OK\n    redis 127.0.0.1:6379> get foo\n    \"bar\"\n\n今天主要是关注Node下面怎么使用Redis。[这里](https://github.com/mranney/node_redis)有封装了一套API，让我们很方便地在Node里面使用Redis。API跟Redis的命令的名称基本上是一致的，例如`get`、`set`，还有最常用的哈希表操作`hgetAll`、`hmset`等。\n\n首先是要在工作目录下载这个包：\n\n    npm install redis\n\n然后就可以使用了！我们用Node的命令行来演示一下：\n\n    var client = require(\"redis\").createClient();\n\tclient.set(\"foo\", \"bar\");\n\tclient.get(\"foo\", function (err, reply) {\n      console.log(reply);\n    });\n\n跟上面的命令行的命令保持一致，很方便。这个包还支持一些事件，例如`ready`、`connect`等，也提供了一些方便的工具函数，例如`redis.print`，方便我们用Redis的方式输出内容等，有兴趣的童鞋可以查看github上的文档哦。\n","htmlText":"<p>Redis是一个开源的，基于<code>key-value</code>的内存数据库，可以作为一个能够存储字符串、哈希表、列表、集合等数据结构的数据服务器。</p>\n<p>首先是要安装一个Redis。在Unix/Linux下需要下载源码编译安装，今天就来简单看看Windows下如何安装吧。打开Redis的Windows版本的<a href=\"https://github.com/rgl/redis/downloads\">下载页面</a>，选择对应Windows版本的包下载即可。</p>\n<p>下载完解压到一个地方就可以使用了。首先启动Redis服务，双击<code>redis-server.exe</code>即可：</p>\n<pre><code>[9612] 07 Nov 18:01:28 # Warning: no config file specified, using the default config. In order to specify a config file use &#39;redis-server /path/to/redis.conf&#39;\n[9612] 07 Nov 18:01:28 * Server started, Redis version 2.4.5\n[9612] 07 Nov 18:01:28 * DB loaded from disk: 0 seconds\n[9612] 07 Nov 18:01:28 * The server is now ready to accept connections on port 6379\n[9612] 07 Nov 18:01:29 - DB 0: 8 keys (0 volatile) in 12 slots HT.\n[9612] 07 Nov 18:01:29 - 0 clients connected (0 slaves), 1182568 bytes in use\n</code></pre><p>启动后可以看到当前的端口、使用了多少个<code>key</code>还有多少个客户端链接进来等信息。注意哦，这些信息现在都是默认的配置，修改配置文件<code>redis.conf</code>可以修改这些信息，详细的配置文档<a href=\"http://redis.io/topics/config\">参考这里</a>。然后就可以启动<code>redis-cli.exe</code>来使用Redis了：</p>\n<pre><code>redis 127.0.0.1:6379&gt; set foo bar\nOK\nredis 127.0.0.1:6379&gt; get foo\n&quot;bar&quot;\n</code></pre><p>今天主要是关注Node下面怎么使用Redis。<a href=\"https://github.com/mranney/node_redis\">这里</a>有封装了一套API，让我们很方便地在Node里面使用Redis。API跟Redis的命令的名称基本上是一致的，例如<code>get</code>、<code>set</code>，还有最常用的哈希表操作<code>hgetAll</code>、<code>hmset</code>等。</p>\n<p>首先是要在工作目录下载这个包：</p>\n<pre><code>npm install redis\n</code></pre><p>然后就可以使用了！我们用Node的命令行来演示一下：</p>\n<pre><code>var client = require(&quot;redis&quot;).createClient();\nclient.set(&quot;foo&quot;, &quot;bar&quot;);\nclient.get(&quot;foo&quot;, function (err, reply) {\n  console.log(reply);\n});\n</code></pre><p>跟上面的命令行的命令保持一致，很方便。这个包还支持一些事件，例如<code>ready</code>、<code>connect</code>等，也提供了一些方便的工具函数，例如<code>redis.print</code>，方便我们用Redis的方式输出内容等，有兴趣的童鞋可以查看github上的文档哦。</p>\n","summaryMarkdownText":"\n\n\nRedis是一个开源的，基于`key-value`的内存数据库，可以作为一个能够存储字符串、哈希表、列表、集合等数据结构的数据服务器。\n\n首先是要安装一个Redis。在Unix/Linux下需要下载源码编译安装，今天就来简单看看Windows下如何安装吧。打开Redis的Windows版本的[下载页面](https://github.com/rgl/redis/downloads)，选择对应Windows版本的包下载即可。\n\n下载完解压到一个地方就可以使用了。首先启动Redis服务，双击`redis-server.exe`即可：\n\n    [9612] 07 Nov 18:01:28 # Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'\n    [9612] 07 Nov 18:01:28 * Server started, Redis version 2.4.5\n    [9612] 07 Nov 18:01:28 * DB loaded from disk: 0 seconds\n    [9612] 07 Nov 18:01:28 * The server is now ready to accept connections on port 6379\n    [9612] 07 Nov 18:01:29 - DB 0: 8 keys (0 volatile) in 12 slots HT.\n    [9612] 07 Nov 18:01:29 - 0 clients connected (0 slaves), 1182568 bytes in use\n\n启动后可以看到当前的端口、使用了多少个`key`还有多少个客户端链接进来等信息。注意哦，这些信息现在都是默认的配置，修改配置文件`redis.conf`可以修改这些信息，详细的配置文档[参考这里](http://redis.io/topics/config)。然后就可以启动`redis-cli.exe`来使用Redis了：\n\n    redis 127.0.0.1:6379> set foo bar\n    OK\n    redis 127.0.0.1:6379> get foo\n    \"bar\"\n\n今天主要是关注Node下面怎么使用Redis。[这里](https://github.com/mranney/node_redis)有封装了一套API，让我们很方便地在Node里面使用Redis。API跟Redis的命令的名称基本上是一致的，例如`get`、`set`，还有最常用的哈希表操作`hgetAll`、`hmset`等。\n","summaryHtmlText":"<p>Redis是一个开源的，基于<code>key-value</code>的内存数据库，可以作为一个能够存储字符串、哈希表、列表、集合等数据结构的数据服务器。</p>\n<p>首先是要安装一个Redis。在Unix/Linux下需要下载源码编译安装，今天就来简单看看Windows下如何安装吧。打开Redis的Windows版本的<a href=\"https://github.com/rgl/redis/downloads\">下载页面</a>，选择对应Windows版本的包下载即可。</p>\n<p>下载完解压到一个地方就可以使用了。首先启动Redis服务，双击<code>redis-server.exe</code>即可：</p>\n<pre><code>[9612] 07 Nov 18:01:28 # Warning: no config file specified, using the default config. In order to specify a config file use &#39;redis-server /path/to/redis.conf&#39;\n[9612] 07 Nov 18:01:28 * Server started, Redis version 2.4.5\n[9612] 07 Nov 18:01:28 * DB loaded from disk: 0 seconds\n[9612] 07 Nov 18:01:28 * The server is now ready to accept connections on port 6379\n[9612] 07 Nov 18:01:29 - DB 0: 8 keys (0 volatile) in 12 slots HT.\n[9612] 07 Nov 18:01:29 - 0 clients connected (0 slaves), 1182568 bytes in use\n</code></pre><p>启动后可以看到当前的端口、使用了多少个<code>key</code>还有多少个客户端链接进来等信息。注意哦，这些信息现在都是默认的配置，修改配置文件<code>redis.conf</code>可以修改这些信息，详细的配置文档<a href=\"http://redis.io/topics/config\">参考这里</a>。然后就可以启动<code>redis-cli.exe</code>来使用Redis了：</p>\n<pre><code>redis 127.0.0.1:6379&gt; set foo bar\nOK\nredis 127.0.0.1:6379&gt; get foo\n&quot;bar&quot;\n</code></pre><p>今天主要是关注Node下面怎么使用Redis。<a href=\"https://github.com/mranney/node_redis\">这里</a>有封装了一套API，让我们很方便地在Node里面使用Redis。API跟Redis的命令的名称基本上是一致的，例如<code>get</code>、<code>set</code>，还有最常用的哈希表操作<code>hgetAll</code>、<code>hmset</code>等。</p>\n"}