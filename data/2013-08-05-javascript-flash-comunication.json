{"year":"2013","month":"08","day":"05","filePath":"/home/dafeizizhu/workspace/github/dafeizizhu/dafeizizhu.github.com/site/posts/2013/08/05/javascript-flash-comunication.html","fileName":"javascript-flash-comunication","layout":"post","title":"JavaScript与Flash通信","description":"","tags":["前端"],"markdownText":"\n\n\n虽然说iOS不支持Flash，但是Flash在桌面端的使用量还是很大的。作为一个专业的前端开发人员，至少也要懂得如何使用JavaScript与Flash进行通信。\n\n### JavaScript => Flash\n\n使用JavaScript调用Flash内部的方法。假设有以下Flash片段：\n\n    <object type=\"application/x-shockwave-flash\" id=\"myFlashID\" width=\"85\" height=\"85\" data=\"framejump.swf\">\n      <param name=\"allowScriptAccess\" value=\"sameDomain\">\n      <param name=\"movie\" value=\"framejump.swf\">\n      <param name=\"quality\" value=\"high\">\n      <param name=\"scale\" value=\"noscale\">\n      <param name=\"wmode\" value=\"transparent\">\n    </object>\n\n我们可以通过JavaScript先获取该Flash影片的引用：\n\n    function getFlashMovieObject(movieName){\n      if (window.document[movieName]){\n        return window.document[movieName];\n      }else if (navigator.appName.indexOf(\"Microsoft\")==-1){\n        if (document.embeds && document.embeds[movieName])\n          return document.embeds[movieName];\n      }else{\n        return document.getElementById(movieName);\n      }\n    }\n\n获取引用后，还需要Flash内部使用增加回调的方式暴露接口：\n\n    ExternalInterface.addCallback(\"frameJump\", frameJump);\n\n`frameJump`的代码如下：\n\n    function frameJump(whichFrame:String):void {\n      gotoAndStop(whichFrame);\n    }\n\n这样就可以在JavaScript中直接调用该引用上的方法：\n\n    var flashObj = getFlashMovieObject(\"movieName\");\n    flashObj.frameJump(5);\n\n例子[参考这里](http://iviewsource.com/exercises/javascripttoflash/)。通过这个机制可以让JavaScript调用Flash中的方法。\n\n### Flash => JavaScript\n\nFlash调用JavaScript的方法是使用`ExternalInterface.call`这个方法去调用外部的JavaScript方法，使用方法很简单：\n\n    ExternalInterface.call(\"alert\", \"This alert comes from Flash\");\n\n其中第一个参数是全局作用域中的函数名称，后面的参数是传给要调用的JavaScript方法的参数。例子[参考这里](http://iviewsource.com/exercises/flashtojavascript/)。\n\n参考资料：\n\n1. [Communication between JavaScript and Flash](http://iviewsource.com/codingtutorials/communication-between-javascript-and-flash/)\n2. [Javascript与Flash通信全解析](http://www.imququ.com/post/39.html)\n","htmlText":"<p>虽然说iOS不支持Flash，但是Flash在桌面端的使用量还是很大的。作为一个专业的前端开发人员，至少也要懂得如何使用JavaScript与Flash进行通信。</p>\n<h3 id=\"javascript-flash\">JavaScript =&gt; Flash</h3>\n<p>使用JavaScript调用Flash内部的方法。假设有以下Flash片段：</p>\n<pre><code>&lt;object type=&quot;application/x-shockwave-flash&quot; id=&quot;myFlashID&quot; width=&quot;85&quot; height=&quot;85&quot; data=&quot;framejump.swf&quot;&gt;\n  &lt;param name=&quot;allowScriptAccess&quot; value=&quot;sameDomain&quot;&gt;\n  &lt;param name=&quot;movie&quot; value=&quot;framejump.swf&quot;&gt;\n  &lt;param name=&quot;quality&quot; value=&quot;high&quot;&gt;\n  &lt;param name=&quot;scale&quot; value=&quot;noscale&quot;&gt;\n  &lt;param name=&quot;wmode&quot; value=&quot;transparent&quot;&gt;\n&lt;/object&gt;\n</code></pre><p>我们可以通过JavaScript先获取该Flash影片的引用：</p>\n<pre><code>function getFlashMovieObject(movieName){\n  if (window.document[movieName]){\n    return window.document[movieName];\n  }else if (navigator.appName.indexOf(&quot;Microsoft&quot;)==-1){\n    if (document.embeds &amp;&amp; document.embeds[movieName])\n      return document.embeds[movieName];\n  }else{\n    return document.getElementById(movieName);\n  }\n}\n</code></pre><p>获取引用后，还需要Flash内部使用增加回调的方式暴露接口：</p>\n<pre><code>ExternalInterface.addCallback(&quot;frameJump&quot;, frameJump);\n</code></pre><p><code>frameJump</code>的代码如下：</p>\n<pre><code>function frameJump(whichFrame:String):void {\n  gotoAndStop(whichFrame);\n}\n</code></pre><p>这样就可以在JavaScript中直接调用该引用上的方法：</p>\n<pre><code>var flashObj = getFlashMovieObject(&quot;movieName&quot;);\nflashObj.frameJump(5);\n</code></pre><p>例子<a href=\"http://iviewsource.com/exercises/javascripttoflash/\">参考这里</a>。通过这个机制可以让JavaScript调用Flash中的方法。</p>\n<h3 id=\"flash-javascript\">Flash =&gt; JavaScript</h3>\n<p>Flash调用JavaScript的方法是使用<code>ExternalInterface.call</code>这个方法去调用外部的JavaScript方法，使用方法很简单：</p>\n<pre><code>ExternalInterface.call(&quot;alert&quot;, &quot;This alert comes from Flash&quot;);\n</code></pre><p>其中第一个参数是全局作用域中的函数名称，后面的参数是传给要调用的JavaScript方法的参数。例子<a href=\"http://iviewsource.com/exercises/flashtojavascript/\">参考这里</a>。</p>\n<p>参考资料：</p>\n<ol>\n<li><a href=\"http://iviewsource.com/codingtutorials/communication-between-javascript-and-flash/\">Communication between JavaScript and Flash</a></li>\n<li><a href=\"http://www.imququ.com/post/39.html\">Javascript与Flash通信全解析</a></li>\n</ol>\n","summaryMarkdownText":"\n\n\n虽然说iOS不支持Flash，但是Flash在桌面端的使用量还是很大的。作为一个专业的前端开发人员，至少也要懂得如何使用JavaScript与Flash进行通信。\n\n### JavaScript => Flash\n\n使用JavaScript调用Flash内部的方法。假设有以下Flash片段：\n\n    <object type=\"application/x-shockwave-flash\" id=\"myFlashID\" width=\"85\" height=\"85\" data=\"framejump.swf\">\n      <param name=\"allowScriptAccess\" value=\"sameDomain\">\n      <param name=\"movie\" value=\"framejump.swf\">\n      <param name=\"quality\" value=\"high\">\n      <param name=\"scale\" value=\"noscale\">\n      <param name=\"wmode\" value=\"transparent\">\n    </object>\n\n我们可以通过JavaScript先获取该Flash影片的引用：\n\n    function getFlashMovieObject(movieName){\n      if (window.document[movieName]){\n        return window.document[movieName];\n      }else if (navigator.appName.indexOf(\"Microsoft\")==-1){\n        if (document.embeds && document.embeds[movieName])\n          return document.embeds[movieName];","summaryHtmlText":"<p>虽然说iOS不支持Flash，但是Flash在桌面端的使用量还是很大的。作为一个专业的前端开发人员，至少也要懂得如何使用JavaScript与Flash进行通信。</p>\n<h3 id=\"javascript-flash\">JavaScript =&gt; Flash</h3>\n<p>使用JavaScript调用Flash内部的方法。假设有以下Flash片段：</p>\n<pre><code>&lt;object type=&quot;application/x-shockwave-flash&quot; id=&quot;myFlashID&quot; width=&quot;85&quot; height=&quot;85&quot; data=&quot;framejump.swf&quot;&gt;\n  &lt;param name=&quot;allowScriptAccess&quot; value=&quot;sameDomain&quot;&gt;\n  &lt;param name=&quot;movie&quot; value=&quot;framejump.swf&quot;&gt;\n  &lt;param name=&quot;quality&quot; value=&quot;high&quot;&gt;\n  &lt;param name=&quot;scale&quot; value=&quot;noscale&quot;&gt;\n  &lt;param name=&quot;wmode&quot; value=&quot;transparent&quot;&gt;\n&lt;/object&gt;\n</code></pre><p>我们可以通过JavaScript先获取该Flash影片的引用：</p>\n<pre><code>function getFlashMovieObject(movieName){\n  if (window.document[movieName]){\n    return window.document[movieName];\n  }else if (navigator.appName.indexOf(&quot;Microsoft&quot;)==-1){\n    if (document.embeds &amp;&amp; document.embeds[movieName])\n      return document.embeds[movieName];\n</code></pre>"}