<!DOCTYPE html>
<html>

  <head>
    <title>获取浏览器视口的大小</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="/common/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/blog.css">
  </head>

  <body>
    <div class="blog-masthead">
      <div class="container">
        <nav class="blog-nav"><a href="/" class="blog-nav-item active">主页</a><a href="/posts" class="blog-nav-item">文章</a><a href="/tags" class="blog-nav-item">标签</a><a href="/projects" class="blog-nav-item">项目</a><a href="/about" class="blog-nav-item">关于</a></nav>
      </div>
    </div>
    <div class="container">
      <div class="blog-header">
        <h1 class="blog-title">小麦的二三事</h1>
        <p class="lead blog-description">他大舅他二舅，都是他舅</p>
      </div>
      <div class="col-sm-8 blog-main">
        <div class="row">
          <div class="blog-post">
            <h2 class="blog-post-title">获取浏览器视口的大小</h2>
            <p class="blog-post-meta">写于2013年09月05日 关于<a href="/tags/JavaScript">JavaScript</a></p>
            <p>在日常工作中，经常需要浏览器当前视口的大小，以防止一些绝对定位的元素跑到视口之外（例如Tips等）。最稳妥的办法是使用jQuery：</p> <pre><code>var dimension = {
  &quot;width&quot;: $(window).width(),
  &quot;height&quot;: $(window).height()
};
</code></pre>
            <p>那用原生的JavaScript是如何获取视口大小的呢？有以下几个属性可以供我们使用：</p>
            <ol>
              <li><code>window.innerWidth</code>和<code>window.innerHeight</code>。</li>
              <li><code>document.documentElement.clientWidth</code>和<code>document.documentElement.clientHeight</code>。</li>
              <li><code>document.body.clientWidth</code>和<code>document.body.clientHeight</code>。</li>
            </ol>
            <p>第一组是<code>innerXXX</code>，只有<code>window</code>有这个属性，而这个属性就是代表了视口的大小！第二组和地三组都是是一个DOM元素的大小，不同是DOM元素而已，一个是<code>documentElement</code>，即<code>html</code>元素，一个是<code>body</code>元素。</p>
            <p>不同的浏览器对于以上这几个属性的处理有所不同，大概可以分成标准和非标准两类：</p>
            <ol>
              <li>标准，即Chrome、FireFox、IE9及以上版本。</li>
              <li>非标准，即IE8及以下版本。</li>
            </ol>
            <p>我们将运行以下的代码测试浏览器对于这些属性的处理，运行例子可以<a href="http://jsfiddle.net/s4PhQ/show/">参考这里</a>：</p> <pre><code>function print(code) {
  $(&quot;body&quot;).append(code + &quot;:&quot; + eval(code)).append(&quot;&lt;br/&gt;&quot;);
}

print(&quot;window.innerWidth&quot;);
print(&quot;document.documentElement.clientWidth&quot;);
print(&quot;document.body.clientWidth&quot;);

print(&quot;window.innerHeight&quot;);
print(&quot;document.documentElement.clientHeight&quot;);
print(&quot;document.body.clientHeight&quot;);
</code></pre>
            <h3 id="-">标准</h3>
            <hr>
            <p>以Chrome为例，执行结果是这样的：</p>
            <p><img src="https://raw.github.com/dafeizizhu/dafeizizhu.github.com/master/images/2013-09-05/Chrome.PNG" alt="Chrome"></p>
            <p>可以看到，第一组和第二组的取值是完全一致的，说明标准浏览器的实现两者都是表示浏览器视口的大小。而第三组表示的则是<code>body</code>的大小，即页面内容的大小，跟浏览器的视口没有必然联系。</p>
            <h3 id="-">非标准</h3>
            <hr>
            <p>以IE8（使用的是IE9的IE8模式）为例，执行结果是这样的：</p>
            <p><img src="https://raw.github.com/dafeizizhu/dafeizizhu.github.com/master/images/2013-09-05/IE8.PNG" alt="IE8"></p>
            <p>第一组的值竟然是<code>undefined</code>！这说明非标准浏览器是不支持<code>window.innerWidth</code>和<code>window.innerHeight</code>的。第二组跟第三组的值跟标准浏览器的实现是一样的。</p>
            <h3 id="-">总结</h3>
            <hr>
            <p>原生JavaScript与jQuery的执行结果比较可以<a href="http://jsfiddle.net/xxQaA/1/show/">参考这里</a>。只有第二组的值是主流的浏览器都支持的。所以，要获取浏览器视口的大小，最好的办法还是使用……jQuery，哈哈！</p>
            <h3 id="-">坑</h3>
            <hr>
            <p>要注意避免页面使用怪异模式渲染，因为即使是jQuery，<strong>在怪异模式下面获取的视口大小都为0</strong>！</p>
            <nav class="pager">
              <li><a href="/posts/2013/09/04/jquery-append.html" title="jQuery扫盲之jQuery.fn.append">上一篇</a></li>
              <li><a href="/posts/2013/09/07/dom-attribute-and-property.html" title="Secrets of the JavaScript Ninja 读书笔记之 DOM的特性和属性">下一篇</a></li>
            </nav>
          </div>
        </div>
      </div>
      <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
        <div class="sidebar-module">
          <h4>文章</h4>
          <ol class="list-unstyled">
            <li><a href="/posts/2014/02">2014年02月</a></li>
            <li><a href="/posts/2014/01">2014年01月</a></li>
            <li><a href="/posts/2013/12">2013年12月</a></li>
            <li><a href="/posts/2013/11">2013年11月</a></li>
            <li><a href="/posts/2013/10">2013年10月</a></li>
            <li><a href="/posts/2013/09">2013年09月</a></li>
            <li><a href="/posts/2013/08">2013年08月</a></li>
            <li><a href="/posts/2013/07">2013年07月</a></li>
            <li><a href="/posts/2013/01">2013年01月</a></li>
            <li><a href="/posts/2012/12">2012年12月</a></li>
          </ol>
        </div>
        <div class="sidebar-module">
          <h4>标签</h4>
          <ol class="list-unstyled">
            <li><a href="/tags/notes">notes(5)</a></li>
            <li><a href="/tags/css">css(23)</a></li>
            <li><a href="/tags/html">html(10)</a></li>
            <li><a href="/tags/JavaScript">JavaScript(106)</a></li>
            <li><a href="/tags/前端">前端(9)</a></li>
            <li><a href="/tags/jQuery">jQuery(29)</a></li>
            <li><a href="/tags/http">http(4)</a></li>
            <li><a href="/tags/node">node(3)</a></li>
            <li><a href="/tags/html5">html5(7)</a></li>
            <li><a href="/tags/Flash">Flash(30)</a></li>
          </ol>
        </div>
      </div>
    </div>
    <div class="container"></div>
    <footer class="blog-footer">
      <p>Powerby MaiZhiying</p>
    </footer>
  </body>

</html>