---
layout: post
title: "《JavaScript设计模式与开发实践》读书笔记"
description: ""
category: 
tags: [JavaScript, 读书笔记]
---

第14章 中介者模式

面向对象设计鼓励将行为分布到各个对象中，把对象划分为更小的粒度，有助于增强对象的可复用性，但由于这些细粒度对象之间的联系激增，又有可能会反过来降低它们的可复用性。

中介者模式的作用就是解除对象与对象之间的紧耦合关系。增加一个中介者对象后，所有的相关对象都通过中介者对象来通信，而不是互相引用，所以当一个对象发生改变时，只需要通知中介者对象即可。

实现中介者对象，一般有以下两种方式：

1. 利用发布-订阅模式，将中介者对象实现为订阅者，各个细粒度的对象作为发布者。一旦小对象的状态发生改变，便推送消息给中介者对象，中介者对象处理消息后将反馈发送给其他小对象。
2. 在中介者对象中开放一些接收消息的接口，各个小对象可以直接调用接口来给中介者对象发送消息。

中介者模式是迎合迪米特法则的一种实现。迪米特法则也叫最小知识原则，是指一个对象应该尽可能少地了解另外的对象（类似不和陌生人说话）。在中介者模式中，对象之间几乎不知道彼此的存在，它们只通过中介者对象来互相影响对方。

因此，中介者模式使各个对象之间得以解耦，以中介者和对象之间的一对多关系取代了对象之间的网状多对多关系。各个对象只需要关注自身功能的实现，对象之间的交互关系交给了中介者对象来实现和维护。

中介者模式最大的缺点是系统中会新增一个中介者对象，因为对象之间交互的复杂性，转移成了中介者对象的复杂性，使得中介者对象经常是巨大的。中介者对象自身往往就是一个难以维护的对象。此外，中介者对象要占去一部分内存。

中介者模式可以非常方便地对模块或者对象进行解耦，但对象之间并非一定需要解耦。在实际项目中，模块或对象之间有一些依赖关系是很正常的。一般来说，如果对象之间的复杂耦合确实导致调用和维护出现了困难，而且这些耦合度随项目的变化呈指数增长曲线，那我们就可以考虑用中介者模式来重构代码。
