---
layout: post
title: "《JavaScript设计模式与开发实践》读书笔记"
description: ""
category: 
tags: [JavaScript, 读书笔记]
---

### 第17章 适配器模式

适配器模式的作用是解决两个软件实体之间的接口不兼容问题。使用适配器模式之后，原本由于接口不兼容而不能工作的两个软件实体可以一起工作。

适配器模式、装饰着模式、代理模式和外观模式的异同：

1. 这几个模式都属于“包装模式”，都是由一个对象来包装另一个对象。
2. 适配器模式主要用来解决两个已有接口之间不匹配的问题，它部需要改变已有的接口，就能使它们协同作用。
3. 装饰者模式的作用是为了给对象增加新的功能。装饰者模式通常会形成一条长的装饰链，而适配器通常只包装一次。
4. 代理模式是为了控制对对象的访问，通常也只包装一次。
5. 外观模式的作用和适配器比较相似，其最显著的特点是定义了一个新的接口。

### 第18章 单一职责原则

单一职责原则（SRP）更多地是被运用在对象或者方法级别上。每个职责都是变化的一个轴线，如果一个方法承担了过多的职责，那么在需求的变迁过程中，需要改写这个方法的可能性就比较大。

SRP原则体现为：一个对象（方法）只做一件事情：

1. 代理模式：把额外的职责增加到代理对象中。在它们各自发生变化的时候，也不会影响另外的对象。
2. 迭代器模式：把遍历对象的职责分离到迭代器中，使得迭代和业务逻辑发生变化时不相互影响。
3. 单例模式：把管理单例的职责和业务逻辑分别封装到不同的方法中。
4. 装饰者模式：更多的职责在代码运行时被动态装饰到对象上面。

何时应该分离职责：

1. 如果随着需求的变化，有两个职责总是同时变化，那就不必分离它们。
2. 职责的变化轴线仅当它们确定会发生变化的时候才具有意义，即使两个职责已经被耦合在一起，但它们还没有发生改变的征兆，那么也许没有必要主动分离它们，在代码需要重构的时候再进行分离也不迟。

SRP原则的优点是降低了单个类或者对象的复杂度，按照职责把对象分解成更小的粒度，这有助于代码的复用，也有利于进行单元测试。SRP原则最明显的缺点是会增加编写代码的复杂度。

### 第19章 最小知识原则

最小知识原则（LKP）说的是一个软件实体应当尽可能减少与其他实体发生相互作用。

单一职责原则指导我们把对象划分为较小的粒度，这可以提高对象的可复用性，但同时原来越多的对象之间可能会产生错综复杂的联系，如果修改了其中一个对象，很可能会影响到跟它相互引用的对象。对象和对象耦合在一起，有可能会降低它们的可复用性。

最小知识原则要求我们在设计程序时，应当尽量减少对象之间的交互。如果两个对象不必彼此直接通信，那么这两个对象就不要发生直接的相互联系。可以通过第三者对象来转发这些请求。

设计模式中的最小知识原则：

1. 中介者模式：通过增加一个中介者对象，让多有的相关对象都通过中介者来通信，而不是互相引用。
2. 外观模式：定义了一个高层接口，这个接口使子系统更加容易使用。

外观模式的作用是对客户屏蔽一组子系统的复杂性。外观模式必须可以越过“外观”直接使用子系统中的接口。外观模式的作用：

1. 为一组子系统提供一个简单遍历的访问入口。
2. 隔离客户与复杂子系统之间的联系，不用去了解子系统的细节。

修改子系统内部，只要外观不变，就不会影响客户的调用。同样，对外观的修改也不会影响到子系统，它们可以分别变化而互不影响。

封装在最少知识原则中的体现：

1. 当一个对象必须引用另外一个对象的时候，我们可以让对象只暴露必要的接口，让对象之间的联系限制在最小的范围之内。
2. 把变量的可见性限制在一个尽可能小的范围内，这个变量对其他不相关模块的影响就越小，变量被改写和发生冲突的机会也越小。
