---
layout: post
title: "一个用JavaScript写的分页器算法"
description: ""
category: 
tags: [JavaScript]
---
{% include JB/setup %}

今天简单实现了一个分页器组件。感觉要用点脑子的是如何去显示页数十分大的分页器。记得以前有各种规范，规定一个分页器最多能显示多少个按钮，其他的用`...`来替代，例如：

    1 ... 10 11 12 13 14 ... 100

而且还要选中的在显示出来的按钮的中间（例如上例选中的应该是12）。

想了好久，写了这么一个算法：

1. 首先不考虑边界，先计算如果选中的按钮要出现在中间，开始和结束的索引是多少。
2. 如果计算出来的索引不合法，例如小于零或者大于最大页数，则在保证显示页码个数的前提下重新计算索引。
3. 最后计算出正确的开始和结束的索引，还要判断页码是否连续，是否需要加入`...`。
4. 注意加上开始和结束的两个页码。
5. 返回计算后的所有页码信息。

这个算法接受三个参数：

1. `current`，当前页码，计算出来的页码尽可能将这个页码放到中间。
2. `length`，页码的长度，总共有多少个页码。
3. `displayLength`，要显示多少个页码，包括固定的第一个和最后一个。

例子参考这里：

<iframe width="100%" height="300" src="http://jsfiddle.net/XMWVG/embedded/js,result/" allowfullscreen="allowfullscreen" frameborder="0"> </iframe>
