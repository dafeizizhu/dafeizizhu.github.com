---
layout: post
title: "关于框架的一点思考"
description: ""
category: 
tags: [前端]
---
{% include JB/setup %}

由于昨天听了一个非常有意思的培训，觉得对自己作为程序员的价值观有比较大的冲击，今天来分享一下这些与技术关系不大的东西。培训是关于一个PHP框架的反思，也可以算是一个Web框架的反思吧，感觉有很多东西都是共同的。

###关于框架
____

框架要实现三个目标：快速开发、快速运行和快速学习。快速开发，就是说使用框架可以提高开发效率，快速构建可使用的应用系统；快速运行就是使用框架后代码的性能会得到提升；快速学习就是框架本身比较简单，学习成本低。

现在很多框架跟这三个目标是有偏差的，最主要体现在性能和学习成本上。现在的框架，动辄上万行的代码，原来使用一行代码的功能，使用框架后可能成倍地增长，而由于PHP等解释型的语言缺少编译过程（这个方面JavaScript是类似的），多行代码的性能肯定比不上一行代码；而由于上万行的代码，学习成本也会响应地提升，繁多的配置让人却步。

要构建一个符合以上三个目标的Web框架，首先需要的是简单。只有框架本身足够简单，才能保证运行的效率，才能快速上手。而基于Web应用的模式，与企业应用不同，一般可以简单地归纳成数据存取，就是说每一个业务都是数据存取并展现的一个过程。框架只要着眼于这两点就可以了。

框架还分成通用型和专用型两种。前者考虑了全世界，例如支持多数据库、国际化、目录结构、配置、HTML生成方式、各个过程的钩子……通用框架就是希望做到世界上任何一个应用都可以用它来开发。这样的出发点就决定了通用框架不可能简单，它要考虑的东西太多了。而对于一个公司来说，通用框架所需要考虑的事情有很多都是用不着的，例如公司只用MySql，不用考虑多数据库；规定了目录结构和配置，所有项目都必须根据这个目录结构和配置来进行开发……这种专用框架，到了外边肯定是行不通的，但是在公司内部绝对是效率最高，而且最简单的一种实现方式。实现以上的三个目标，专用框架要简单地多。

对于需求的把握也是十分重要的。其中有一个我觉得比较有意思的观点：小众需求的声音才是最大的。当大部分用户使用这个框架觉得没有什么问题的时候，一些小众提出的需求就占了反馈声音中的绝大部分，这使得框架开发者必须关注这些小众需求，但是这些需求在大部分用户那是没有必要的。时刻紧记要为大部分用户服务！

还有一个比较有意思的观点是：代码能不写就不写，写得少错得少。不仅是框架本身的代码，甚至是使用框架开发的业务层的代码，都要精简。最近经常听到他们在讨论一些框架方法的命名问题，就是在纠结命名的长短，都是基于这个观点出发的吧。而且写得少，功能照样实现，对于程序员来说不也是一件很爽的事情吗？

###关于规范
____

这部分的观点与我做了4年程序员的观点有比较大的冲突。在我看来，规范是个好东西，可以统一团队内部的编码风格，提高项目的可维护性等。遵循某些规范，并使用一些手段去检测我们的代码是否符合规范，能够避免一些低级错误。而昨天培训持的是反面的观点，认为规范这个东西，出现的前提是认为程序员“性本惡”。由于害怕程序员出问题，故提出各种规范、各种流程（例如代码检视、领导签字合入等），来限制程序员。用人不疑，疑人不用。把任务交给一个程序员，就要认同这个程序员能在完成这个任务。程序员不需要考虑什么规范、什么流程，认真努力去做就行了。

这个观点跟敏捷中的“基于信任的管理”有一些相同的地方，都是信任程序员是能够完成任务的。对于这个观点，我还是认为规范这个东西还是必不可少的，可以预防非故意的错误，例如粗心或者技能水平不足的场景。而那些为了流程而流程的东西，还是饶了广大苦逼程序员吧。

###关于“我”
____

最后一个部分是关于一些做框架的程序员的心态。第一个是对于敏捷的体会：对于新加的需求要有勇气乐于接受，这才是敏捷。第二个是简单才能应对真正的变化，在做需求的时候不要胡乱猜测别人的需求，当别人真正提出需求的时候才考虑怎么把这些需求加到现在的项目之中。

###总结
____

对于这次培训，我感觉还是收获了不少东西，可能不是技术上的，更多的是对程序员本身的思考。简单的框架，基于信任的管理，不胡乱猜测需求。
